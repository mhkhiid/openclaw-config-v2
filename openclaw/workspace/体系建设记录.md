# 数字孪生体系建设记录

> 创建时间：2026-02-14
> 目的：记录从构想到落地的全过程，用于复盘、调优和复刻

---

## 0. 前置背景

### 起源
2026-02-13 晚间，Alex与助手圆进行了一次深度对话，核心议题：
- OpenClaw的本质 = 对Alex life flow的抽取、提炼和复刻
- 这是让模型契合人的必要资产（不随模型迭代贬值）
- 成长飞轮：观察记录 → 萃取提炼 → 实践验证 → 优化建议 → 持续积累
- 人的终极价值：切入视角、真实链接、创新

### 今日目标（2026-02-14）
1. ✅ 创建体系建设记录文件
2. [ ] 定义数字孪生终极目标 + 架构 + 流程计划
3. [ ] 建立被动信息汇聚体系
4. [ ] 复杂流程工程化设定
5. [ ] 索引/RAG体系方案
6. [ ] 启动运行

---

## 1. 数字孪生终极目标与架构

### 1.1 终极目标定义 ✅

> **构建Alex的数字孪生——一个能承载并持续进化Alex的视角、知识、判断模式和价值观的结构化知识体系。助手圆作为建造者，在静默/不打扰/持续的方式下推进构建，使任何AI agent都能调用这套资产来理解和服务Alex。**

**三个子目标（优先级 ① > ② > ③）：**

① **认知镜像**（懂你）
- 提炼世界观、价值观、决策模式、商业认知、沟通习惯
- 不迎合——理解但保持独立判断，发现盲区主动指出
- 目标：给定情境能预判"Alex会怎么想"

② **成长飞轮**（帮你变强）
- 主动发现有价值的信息/知识 + 盲区/误区
- 不等被问就给优化建议
- 目标：不只复刻，在Alex视角基础上扩展和深化

③ **行动延伸**（替你做）
- 授权范围内执行任务
- 大脑接四肢，释放时间到核心圈

### 1.2 架构设计 ✅

**分层架构：**
- **USER.md** = 精华摘要（每session自动加载）
- **digital-twin/** = 完整知识库（按需读取）
- 两者关系：USER.md从digital-twin/蒸馏而来

**知识库目录：**
```
digital-twin/
├── README.md              # 索引和使用说明
├── worldview/             # 世界观与价值观（3个文件）
├── cognition/             # 认知模式（3个文件，含盲区观察）
├── business/              # 商业认知（3个文件）
├── communication/         # 沟通模式（3个文件）
├── life-flow/             # 生活流（3个文件）
├── relationships/         # 人际网络
└── distilled/             # 蒸馏区（每周提炼）
```

**角色定义：**
- 助手圆 = 建造者，不是数字孪生本身
- 保持第三方独立判断，不迎合
- 反迎合规则已硬编码到SOUL.md

### 1.3 数据采集机制 ✅

| 来源 | 方式 | 频率 |
|------|------|------|
| 日常对话 | 自然提炼（静默） | 持续 |
| 孪生夜话 | 每晚9-11点深度对话~10min | 每日 |
| 观察报告 | 生成report + review | 每周末 |
| 被动验证 | 实际任务中校验偏差 | 持续 |

**已设置：** 每晚21:00 cron提醒孪生夜话

---

## 2. 被动信息汇聚体系 ✅（初始框架）

**文件：** `workspace/info-radar.md`
**飞书群：** 万象天引（待Alex建群后配置群ID）

### 核心设计
- 每天中午12:00，spawn subagent搜索+提炼+推送
- 话题动态调整：从digital-twin + 近期对话 + Alex在群里的指示中提取
- 不写死领域，主动补充盲区
- 高质量筛选：综合判断可信度，多源交叉验证

### 安全方案
- subagent仅用web_search + web_fetch（无exec）
- 结果经主agent消毒后推送
- 未来可上Docker沙箱进一步隔离

### 待Alex操作
- [ ] 创建飞书群「万象天引」并拉入助手圆机器人
- [ ] 提供群ID后配置cron

### 待持续优化
- [ ] 研究B站/YouTube视频转文字
- [ ] 研究小红书抓取
- [ ] 监控clawhub新skill/mcp
- [ ] 信息源持续扩展

---

## 3. 复杂流程工程化 ✅

**文件：** `workspace/orchestration-playbook.md`

### 核心决策
- 轻量任务直接做，不走重流程
- 复杂判断用多因素综合评估（非硬性阈值）
- Subagent spawn前必须评估API可行性
- 模型分级：Opus（复杂/规则多/系统配置）、K2.5（提炼/代码/批量）
- 并发上限4个，分散provider
- 成本预警 $30/天，硬限 $50/天
- 失败可自主处理，重构方法需问Alex
- 汇报时标注模型
- 经验持续积累在playbook底部

---

## 4. 索引/RAG体系 ✅

### 方案
- **B+D（目录索引+手工摘要分层）**：已就位
  - digital-twin/README.md 作为目录索引
  - USER.md 保持精华摘要（自动加载）
- **memory_search（语义搜索）**：已配置并验证
  - Provider: Gemini (gemini-embedding-001)
  - 索引范围: MEMORY.md + memory/*.md + digital-twin/**
  - Session历史也可索引（experimental开启）
  - 搜索准确度：0.88分命中核心文件

### 配置变更
- openclaw.json 添加 `agents.defaults.memorySearch` 配置
- models.providers 添加 google provider（API key）
- Gateway重启生效

---

## 5. 变更日志

| 日期 | 变更内容 | 决策人 |
|------|---------|--------|
| 2026-02-14 | 创建文件，启动体系建设 | Alex + 助手圆 |
| 2026-02-14 | 任务1完成：目标+架构+知识库+SOUL.md更新+夜话cron | Alex + 助手圆 |
| 2026-02-14 | 对话提炼机制：每日7:00 cron提炼 + 每周日10:00蒸馏 + 明日9:00验证 | Alex + 助手圆 |
| 2026-02-14 | 任务3完成：orchestration-playbook.md 写入全部工程化规则 | Alex + 助手圆 |
| 2026-02-14 | 任务4完成：Gemini embedding配置 + memory_search验证通过 | Alex + 助手圆 |
| 2026-02-14 | 任务2框架完成：info-radar.md创建，待建群后配置cron | Alex + 助手圆 |
